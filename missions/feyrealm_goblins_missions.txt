

feyrealm_goblins_military_missions = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = XZC
			tag = XZZ
		}
	}
	has_country_shield = yes

	feyrealm_goblins_technocratic_coup_mission = {
		icon = mission_noble_council
		required_missions = {  }
		trigger = {
			estate_influence = {
				estate = estate_artificers
				influence = 60
			}
		}
		effect = {
			change_government = republic
			add_government_reform = technocracy_republic_reform
			add_stability = -1
			country_event = { id = planar_generic_missions_events.30 }
		}
	}
	
	feyrealm_goblins_army_of_the_republic_mission = {
		icon = mission_pf_soldier
		required_missions = { feyrealm_goblins_technocratic_coup_mission }
		trigger = {
			employed_advisor = { category = MIL }
			num_of_rajput = 5
		}
		effect = {
			add_yearly_manpower = 2
			add_country_modifier = {
				name = "feyrealm_goblins_army_of_the_republic"
				duration = -1
			}
		}
	}
	
	feyrealm_goblins_harness_pixie_dust_mission = {
		icon = mission_dominate_persian_gulf
		required_missions = { feyrealm_goblins_army_of_the_republic_mission }
		provinces_to_highlight = {
			trade_goods = pixie_dust
		}
		trigger = {
			any_owned_province = {
				trade_goods = pixie_dust
				has_building = workshop
				base_production = 10
			}
		}
		effect = {
			add_country_modifier = {
				name = "feyrealm_goblins_pixie_dust_usage"
				duration = -1
			}
			add_country_modifier = {
				name = "feyrealm_goblins_pixie_dust_usage_artificers"
				duration = -1
			}
			every_owned_province = {
				limit = { trade_goods = pixie_dust }
				add_base_production = 2
			}
		}
	}
	
	feyrealm_goblins_study_the_dragons_mission = {
		icon =  mission_kobold
		required_missions = { feyrealm_goblins_harness_pixie_dust_mission }
		provinces_to_highlight = {
			OR = {
				owned_by = XZG
				area = greenwyrm_fen_area
				area = whitewyrm_barrow_area
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			OR = {
				AND = {
					XZG = {
						alliance_with = ROOT
						has_opinion = {
							who = ROOT
							value = 200
						}
					}
				}
				AND = {
					XZG = {
						is_subject_of = ROOT
						NOT = { liberty_desire = 50 }
					}
				}
				AND = {
					greenwyrm_fen_area = { type = all owned_by = ROOT }
					whitewyrm_barrow_area = { type = all owned_by = ROOT }
				}
			}
		}
		effect = {
			if = {
				limit = { XZG = { alliance_with = ROOT } }
				vassalize = XZG
			}
			else_if = {
				limit = { XZG = { is_subject_of = ROOT } }
				add_country_modifier = {
					name = "feyrealm_goblins_integrate_dragons"
					duration = 9125 #25 years
				}
			}
			else = { add_adm_power = 100 }
			add_country_modifier = {
				name = "feyrealm_goblin_study_dragons"
				duration = -1
			}
		}

	}
	
	feyrealm_goblins_artilery_mastery_mission = {
		icon = mission_cannons_firing
		required_missions = { feyrealm_goblins_study_the_dragons_mission }
		trigger = {
			has_global_modifier_value = {
				which = artillery_power
				value = 0.10
			}
			num_of_artillery = 50
		}
		effect = {
			add_country_modifier = {
				name = "feyrealm_goblin_artilery_mastery"
				duration = -1
			}
			define_advisor = {
				type = fortification_expert
				skill = 3
				cost_multiplier = 0.1
			}
		}
	}
}

feyrealm_goblins_economic_missions = {
	slot = 4
	generic = no
	ai = no
	has_country_shield = yes
	potential = {
		OR = {
			tag = XZC
			tag = XZZ
		}
	}

	feyrealm_goblins_high_income_mission = {
		icon = mission_high_income
		required_missions = {  } #None
		trigger = { share_of_starting_income = 1.5 }
		effect = {
			add_country_modifier = {
				name = "growing_economy"
				duration = 9125 #25 years
			}
			define_advisor = {
				type = treasurer
				skill = 1
				culture = ROOT
				religion = ROOT
				cost_multiplier = 0.5
			}
		}
	}
	
	feyrealm_goblins_early_industrialisation_mission = {
		icon = mission_smith
		required_missions = { feyrealm_goblins_high_income_mission }
		trigger = {
			num_of_owned_provinces_with = {
				value = 20
				has_building = workshop
			}
		}
		effect = {
			add_dip_power = 100
			add_country_modifier = {
				name = "feyrealm_goblins_early_industrialisation"
				duration = -1
			}
		}
	}
	
	feyrealm_goblins_exploit_tropical_wood_mission = {
		icon = mission_alone_in_the_wood
		required_missions = { feyrealm_goblins_early_industrialisation_mission }
		trigger = {
			any_owned_province = {
				trade_goods = tropical_wood
				has_building = workshop
			}
			treasury = 50
			manpower = 5
		}
		effect = {
			add_treasury = -50
			add_manpower = -5
			random_owned_province = {
				limit = {
					trade_goods = tropical_wood
					has_building = workshop
				}
				add_permanent_province_modifier = {
					name = feyrealm_goblins_exploit_tropical_wood_temp
					duration = 3650 #10 years
				}
				add_province_triggered_modifier = feyrealm_goblins_exploit_tropical_wood
				set_province_flag = exploited_by_goblins
			}
		}
	}
	
	feyrealm_goblins_clearcut_feywoods_mission = {
		icon = mission_colonial
		required_missions = { feyrealm_goblins_exploit_tropical_wood_mission }
		trigger = {
			any_owned_province = {
				OR = {
					has_terrain = ancient_forest
					has_terrain = woods
					has_terrain = forest
				}
				infantry_in_province = 10
			}
			treasury = 100
			manpower = 5
		}
		effect = {
			add_treasury = -100
			add_manpower = -5
			random_owned_province = {
				limit = {
					OR = {
					has_terrain = ancient_forest
					has_terrain = woods
					has_terrain = forest
					}
					infantry_in_province = 10
				}
				add_permanent_province_modifier = {
					name = feyrealm_goblins_clear_cut_modifier_temp
					duration = 3650 #10 years
				}
				set_province_flag = 
				hidden_effect = {
					add_province_triggered_modifier = feyrealm_goblins_clear_cut_modifier
				}
				random_list = {
					40 = {
						add_unrest = 5
						ashentree_pact_rebels = 2
					}
					20 = {
						ashentree_pact_rebels = 1
					}
					30 = {
						add_unrest = 10
						ashentree_pact_rebels = 3
					}
					10 = {
						add_unrest = 15
						ashentree_pact_rebels = 4
					}
				}
			}
		}
	}
	
	feyrealm_goblins_charcoal_in_cinderglades_mission = {
		icon = industrialized_rhineland
		required_missions = { feyrealm_goblins_clearcut_feywoods_mission }
		trigger = {
			any_owned_province = {
				has_terrain = cinderglade_terrain
				fort_level = 2
				num_of_times_expanded_infrastructure = 1
			}
			treasury = 1000
		}
		effect = {
			add_treasury = -1000
			random_owned_province = {
				limit = {
					has_terrain = cinderglade_terrain
					fort_level = 2
					num_of_times_expanded_infrastructure = 1
				}
				change_trade_goods = coal
				add_permanent_province_modifier = {
					name = feyrealm_goblins_charcoal
					duration = -1
				}
			}
			add_country_modifier = {
				name = "feyrealm_goblins_advanced_industrialisation"
				duration = -1
			}
			hidden_effect = { remove_country_modifier = feyrealm_goblins_early_industrialisation }
		}
	}
	
	feyrealm_goblins_masters_of_fire_mission = {
		icon = mission_burning_man
		required_missions = { feyrealm_goblins_charcoal_in_cinderglades_mission feyrealm_goblins_artilery_mastery_mission }
		trigger = {
			has_global_modifier_value = {
				which = fire_damage
				value = 0.50
			}
			num_of_owned_provinces_with = {
				value = 11
				trade_goods = coal
				has_building = furnace
			}
		}
		effect = {
			add_country_modifier = {
				name = "feyrealm_goblins_masters_of_fire_artificers"
				duration = -1
			}
			add_country_modifier = {
				name = "feyrealm_goblins_masters_of_fire"
				duration = -1
			}
		}
	}
}